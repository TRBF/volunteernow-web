"use strict";(self.webpackChunkvolunteernow_web=self.webpackChunkvolunteernow_web||[]).push([[362],{3560:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(9662),i=r(579);const s=(0,n.A)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},6494:(e,t,r)=>{r.d(t,{A:()=>j});var n=r(8168),i=r(8587),s=r(5043),a=r(8387),o=r(8610),l=r(4535),c=r(8206),d=r(2532),x=r(2372);function h(e){return(0,x.Ay)("MuiCardContent",e)}(0,d.A)("MuiCardContent",["root"]);var u=r(579);const p=["className","component"],A=(0,l.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),j=s.forwardRef((function(e,t){const r=(0,c.b)({props:e,name:"MuiCardContent"}),{className:s,component:l="div"}=r,d=(0,i.A)(r,p),x=(0,n.A)({},r,{component:l}),j=(e=>{const{classes:t}=e;return(0,o.A)({root:["root"]},h,t)})(x);return(0,u.jsx)(A,(0,n.A)({as:l,className:(0,a.A)(j.root,s),ownerState:x,ref:t},d))}))},6600:(e,t,r)=>{r.d(t,{A:()=>j});var n=r(8168),i=r(8587),s=r(5043),a=r(8387),o=r(8610),l=r(5865),c=r(4535),d=r(8206),x=r(7034),h=r(2563),u=r(579);const p=["className","id"],A=(0,c.Ay)(l.A,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),j=s.forwardRef((function(e,t){const r=(0,d.b)({props:e,name:"MuiDialogTitle"}),{className:l,id:c}=r,j=(0,i.A)(r,p),m=r,f=(e=>{const{classes:t}=e;return(0,o.A)({root:["root"]},x.t,t)})(m),{titleId:g=c}=s.useContext(h.A);return(0,u.jsx)(A,(0,n.A)({component:"h2",className:(0,a.A)(f.root,l),ownerState:m,ref:t,variant:"h6",id:null!=c?c:g},j))}))},9362:(e,t,r)=>{r.r(t),r.d(t,{default:()=>S});var n=r(5043),i=r(3216),s=r(6446),a=r(1637),o=r(5865),l=r(9252),c=r(8903),d=r(3336),x=r(1045),h=r(1906),u=r(3845),p=r(6494),A=r(3560),j=r(6291),m=r(1081),f=r(6600),g=r(5316),y=r(7784),v=r(9347),b=r(9662),C=r(579);const w=(0,b.A)([(0,C.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,C.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"PhotoCamera"),_=e=>{let{open:t,onClose:r,profile:i,onProfileUpdate:a}=e;const[l,c]=(0,n.useState)({username:i.username,first_name:i.first_name,last_name:i.last_name,description:i.description}),[d,u]=(0,n.useState)(null),[p,A]=(0,n.useState)(!1),[b,_]=(0,n.useState)(null),[S,I]=(0,n.useState)("");(0,n.useEffect)((()=>{(async()=>{try{const e=await j.p.getUserProfilePictureById(i.id);I(e)}catch(e){console.error("Error fetching profile picture:",e)}})()}),[i.id]);const P=e=>{const{name:t,value:r}=e.target;c((e=>({...e,[t]:r})))};return(0,C.jsxs)(m.A,{open:t,onClose:r,maxWidth:"sm",fullWidth:!0,children:[(0,C.jsx)(f.A,{children:"Edit Profile"}),(0,C.jsx)(g.A,{children:(0,C.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[(0,C.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[(0,C.jsx)("input",{accept:"image/*",style:{display:"none"},id:"profile-picture-upload",type:"file",onChange:e=>{e.target.files&&e.target.files[0]&&u(e.target.files[0])}}),(0,C.jsx)("label",{htmlFor:"profile-picture-upload",children:(0,C.jsxs)(s.A,{sx:{position:"relative",cursor:"pointer","&:hover":{"& .overlay":{opacity:1}}},children:[(0,C.jsx)(x.A,{src:d?URL.createObjectURL(d):S,sx:{width:120,height:120,border:"2px solid",borderColor:"primary.main"}}),(0,C.jsx)(s.A,{className:"overlay",sx:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",opacity:0,transition:"opacity 0.2s"},children:(0,C.jsx)(w,{sx:{color:"white",fontSize:40}})})]})}),(0,C.jsx)(o.A,{variant:"caption",color:"text.secondary",children:"Click to change profile picture"})]}),(0,C.jsx)(y.A,{fullWidth:!0,label:"Username",name:"username",value:l.username,onChange:P}),(0,C.jsx)(y.A,{fullWidth:!0,label:"First Name",name:"first_name",value:l.first_name,onChange:P}),(0,C.jsx)(y.A,{fullWidth:!0,label:"Last Name",name:"last_name",value:l.last_name,onChange:P}),(0,C.jsx)(y.A,{fullWidth:!0,label:"Description",name:"description",value:l.description,onChange:P,multiline:!0,rows:4}),b&&(0,C.jsx)(o.A,{color:"error",variant:"body2",children:b})]})}),(0,C.jsxs)(v.A,{children:[(0,C.jsx)(h.A,{onClick:r,children:"Cancel"}),(0,C.jsx)(h.A,{onClick:async()=>{try{A(!0),_(null),await j.p.updateProfile(l),d&&d instanceof File&&d.size>0&&await j.p.updateProfilePicture(d,parseInt(localStorage.getItem("user_id")||"0")),a(),r()}catch(e){_("Failed to update profile. Please try again."),console.error("Error updating profile:",e)}finally{A(!1)}},variant:"contained",disabled:p,children:p?"Saving...":"Save Changes"})]})]})},S=()=>{const{id:e}=(0,i.g)(),[t,r]=(0,n.useState)(null),[m,f]=(0,n.useState)([]),[g,y]=(0,n.useState)(!0),[v,b]=(0,n.useState)(null),[w,S]=(0,n.useState)(!1),[I,P]=(0,n.useState)(""),R=localStorage.getItem("user_id")===e,N=async()=>{try{y(!0);const t=await j.p.getUserProfileById(Number(e));r(t),P(await j.p.getUserProfilePictureById(Number(e))),b(null)}catch(t){b("Failed to load profile"),console.error("Error loading profile:",t)}finally{y(!1)}};(0,n.useEffect)((()=>{e&&(N(),(async()=>{try{const t=await j.yW.getUserExperience(Number(e));f(t)}catch(v){console.error("Error fetching experiences:",v)}})())}),[e]);return g?(0,C.jsx)(s.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh",children:(0,C.jsx)(a.A,{})}):v?(0,C.jsx)(s.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh",children:(0,C.jsx)(o.A,{color:"error",children:v})}):t?(0,C.jsxs)(l.A,{maxWidth:"lg",sx:{py:4},children:[(0,C.jsxs)(c.Ay,{container:!0,spacing:3,children:[(0,C.jsx)(c.Ay,{item:!0,xs:12,children:(0,C.jsx)(d.A,{elevation:2,sx:{p:3,borderRadius:2},children:(0,C.jsxs)(s.A,{display:"flex",alignItems:"center",gap:3,children:[(0,C.jsx)(x.A,{src:I,alt:t.username,sx:{width:120,height:120}}),(0,C.jsxs)(s.A,{sx:{flex:1},children:[(0,C.jsxs)(s.A,{display:"flex",alignItems:"center",gap:2,children:[(0,C.jsxs)(o.A,{variant:"h4",children:[t.first_name," ",t.last_name]}),R&&(0,C.jsx)(h.A,{startIcon:(0,C.jsx)(A.A,{}),onClick:()=>{S(!0)},variant:"outlined",size:"small",children:"Edit Profile"})]}),(0,C.jsxs)(o.A,{variant:"subtitle1",color:"text.secondary",children:["@",t.username]})]})]})})}),(0,C.jsx)(c.Ay,{item:!0,xs:12,children:(0,C.jsx)(d.A,{elevation:2,sx:{p:3,borderRadius:2},children:(0,C.jsxs)(s.A,{display:"flex",gap:4,children:[(0,C.jsxs)(s.A,{children:[(0,C.jsx)(o.A,{variant:"h6",children:t.hours}),(0,C.jsx)(o.A,{color:"text.secondary",children:"Volunteer Hours"})]}),(0,C.jsxs)(s.A,{children:[(0,C.jsx)(o.A,{variant:"h6",children:t.count}),(0,C.jsx)(o.A,{color:"text.secondary",children:"Events Attended"})]}),(0,C.jsxs)(s.A,{children:[(0,C.jsx)(o.A,{variant:"h6",children:t.most_fq}),(0,C.jsx)(o.A,{color:"text.secondary",children:"Most Frequent Activity"})]})]})})}),(0,C.jsx)(c.Ay,{item:!0,xs:12,children:(0,C.jsxs)(d.A,{elevation:2,sx:{p:3,borderRadius:2},children:[(0,C.jsx)(o.A,{variant:"h6",gutterBottom:!0,children:"About"}),(0,C.jsx)(o.A,{paragraph:!0,children:t.description||"No description provided"})]})}),(0,C.jsx)(c.Ay,{item:!0,xs:12,children:(0,C.jsx)(d.A,{elevation:2,sx:{p:3,borderRadius:2},children:(0,C.jsxs)(s.A,{display:"flex",gap:1,flexWrap:"wrap",children:[t.date_of_birth&&(0,C.jsx)(u.A,{label:`Birthday: ${new Date(t.date_of_birth).toLocaleDateString()}`,variant:"outlined"}),t.gender&&(0,C.jsx)(u.A,{label:`Gender: ${t.gender}`,variant:"outlined"}),t.account_type&&(0,C.jsx)(u.A,{label:`Account Type: ${t.account_type}`,variant:"outlined"})]})})}),(0,C.jsxs)(c.Ay,{item:!0,xs:12,children:[(0,C.jsx)(o.A,{variant:"h6",gutterBottom:!0,children:"Experiences"}),(0,C.jsx)(s.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:0===m.length?(0,C.jsx)(d.A,{elevation:2,sx:{p:3,borderRadius:2},children:(0,C.jsx)(o.A,{variant:"body1",color:"text.secondary",children:"No experiences yet"})}):m.map((e=>{return(0,C.jsx)(d.A,{elevation:2,sx:{borderRadius:2},children:(0,C.jsxs)(p.A,{children:[(0,C.jsx)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:(0,C.jsxs)(s.A,{children:[(0,C.jsx)(o.A,{variant:"h6",gutterBottom:!0,children:e.role}),(0,C.jsx)(o.A,{variant:"subtitle1",color:"text.secondary",gutterBottom:!0,children:e.organiser}),(0,C.jsxs)(o.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:[new Date(e.start_date).toLocaleDateString()," -",e.end_date?new Date(e.end_date).toLocaleDateString():"Present"]}),(0,C.jsxs)(o.A,{variant:"body2",color:"text.secondary",children:["Hours: ",e.hours]})]})}),(0,C.jsx)(o.A,{variant:"body1",paragraph:!0,children:e.description}),e.participation_picture&&(0,C.jsx)(s.A,{component:"img",src:(t=e.participation_picture,t?t.startsWith("http")?t:`https://api.volunteernow.ro${t}`:""),alt:"Experience",sx:{width:"100%",maxHeight:200,objectFit:"cover",borderRadius:1,mt:2}})]})},e.id);var t}))})]})]}),R&&t&&(0,C.jsx)(_,{open:w,onClose:()=>{S(!1)},profile:t,onProfileUpdate:()=>{N()}})]}):(0,C.jsx)(s.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh",children:(0,C.jsx)(o.A,{children:"Profile not found"})})}}}]);
//# sourceMappingURL=362.8f1b61ca.chunk.js.map