"use strict";(self.webpackChunkvolunteernow_web=self.webpackChunkvolunteernow_web||[]).push([[324],{2110:(e,t,r)=>{r.d(t,{A:()=>v});var o=r(8168),n=r(8587),a=r(5043),l=r(8387),i=r(8610),s=r(4535),c=r(8206),d=r(3336),p=r(2532),u=r(2372);function x(e){return(0,u.Ay)("MuiCard",e)}(0,p.A)("MuiCard",["root"]);var h=r(579);const m=["className","raised"],A=(0,s.Ay)(d.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),v=a.forwardRef((function(e,t){const r=(0,c.b)({props:e,name:"MuiCard"}),{className:a,raised:s=!1}=r,d=(0,n.A)(r,m),p=(0,o.A)({},r,{raised:s}),u=(e=>{const{classes:t}=e;return(0,i.A)({root:["root"]},x,t)})(p);return(0,h.jsx)(A,(0,o.A)({className:(0,l.A)(u.root,a),elevation:s?8:void 0,ref:t,ownerState:p},d))}))},3560:(e,t,r)=>{r.d(t,{A:()=>a});var o=r(9662),n=r(579);const a=(0,o.A)((0,n.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},4194:(e,t,r)=>{r.d(t,{A:()=>k});var o=r(8587),n=r(8168),a=r(5043),l=r(8387),i=r(8610),s=r(7266),c=r(4535),d=r(8206),p=r(4162),u=r(6803),x=r(3336),h=r(2532),m=r(2372);function A(e){return(0,m.Ay)("MuiAlert",e)}const v=(0,h.A)("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);var g=r(7392),f=r(9662),j=r(579);const y=(0,f.A)((0,j.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),C=(0,f.A)((0,j.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),b=(0,f.A)((0,j.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),w=(0,f.A)((0,j.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),S=(0,f.A)((0,j.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),M=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],D=(0,c.Ay)(x.A,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`${r.variant}${(0,u.A)(r.color||r.severity)}`]]}})((e=>{let{theme:t}=e;const r="light"===t.palette.mode?s.e$:s.a,o="light"===t.palette.mode?s.a:s.e$;return(0,n.A)({},t.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.light})).map((e=>{let[n]=e;return{props:{colorSeverity:n,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert[`${n}Color`]:r(t.palette[n].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${n}StandardBg`]:o(t.palette[n].light,.9),[`& .${v.icon}`]:t.vars?{color:t.vars.palette.Alert[`${n}IconColor`]}:{color:t.palette[n].main}}}})),...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.light})).map((e=>{let[o]=e;return{props:{colorSeverity:o,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert[`${o}Color`]:r(t.palette[o].light,.6),border:`1px solid ${(t.vars||t).palette[o].light}`,[`& .${v.icon}`]:t.vars?{color:t.vars.palette.Alert[`${o}IconColor`]}:{color:t.palette[o].main}}}})),...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.dark})).map((e=>{let[r]=e;return{props:{colorSeverity:r,variant:"filled"},style:(0,n.A)({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert[`${r}FilledColor`],backgroundColor:t.vars.palette.Alert[`${r}FilledBg`]}:{backgroundColor:"dark"===t.palette.mode?t.palette[r].dark:t.palette[r].main,color:t.palette.getContrastText(t.palette[r].main)})}}))]})})),E=(0,c.Ay)("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),z=(0,c.Ay)("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),I=(0,c.Ay)("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),R={success:(0,j.jsx)(y,{fontSize:"inherit"}),warning:(0,j.jsx)(C,{fontSize:"inherit"}),error:(0,j.jsx)(b,{fontSize:"inherit"}),info:(0,j.jsx)(w,{fontSize:"inherit"})},k=a.forwardRef((function(e,t){const r=(0,d.b)({props:e,name:"MuiAlert"}),{action:a,children:s,className:c,closeText:x="Close",color:h,components:m={},componentsProps:v={},icon:f,iconMapping:y=R,onClose:C,role:b="alert",severity:w="success",slotProps:k={},slots:W={},variant:N="standard"}=r,$=(0,o.A)(r,M),L=(0,n.A)({},r,{color:h,severity:w,variant:N,colorSeverity:h||w}),F=(e=>{const{variant:t,color:r,severity:o,classes:n}=e,a={root:["root",`color${(0,u.A)(r||o)}`,`${t}${(0,u.A)(r||o)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return(0,i.A)(a,A,n)})(L),H={slots:(0,n.A)({closeButton:m.CloseButton,closeIcon:m.CloseIcon},W),slotProps:(0,n.A)({},v,k)},[_,P]=(0,p.A)("closeButton",{elementType:g.A,externalForwardedProps:H,ownerState:L}),[B,O]=(0,p.A)("closeIcon",{elementType:S,externalForwardedProps:H,ownerState:L});return(0,j.jsxs)(D,(0,n.A)({role:b,elevation:0,ownerState:L,className:(0,l.A)(F.root,c),ref:t},$,{children:[!1!==f?(0,j.jsx)(E,{ownerState:L,className:F.icon,children:f||y[w]||R[w]}):null,(0,j.jsx)(z,{ownerState:L,className:F.message,children:s}),null!=a?(0,j.jsx)(I,{ownerState:L,className:F.action,children:a}):null,null==a&&C?(0,j.jsx)(I,{ownerState:L,className:F.action,children:(0,j.jsx)(_,(0,n.A)({size:"small","aria-label":x,title:x,color:"inherit",onClick:C},P,{children:(0,j.jsx)(B,(0,n.A)({fontSize:"small"},O))}))}):null]}))}))},5324:(e,t,r)=>{r.r(t),r.d(t,{default:()=>D});var o=r(5043),n=r(9252),a=r(1637),l=r(6446),i=r(5865),s=r(1906),c=r(4194),d=r(2110),p=r(6494),u=r(7392),x=r(1081),h=r(6600),m=r(5316),A=r(7784),v=r(3336),g=r(9347),f=r(9662),j=r(579);const y=(0,f.A)((0,j.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");var C=r(3560);const b=(0,f.A)((0,j.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),w=(0,f.A)((0,j.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload");var S=r(9134),M=r(6291);const D=()=>{const[e,t]=(0,o.useState)([]),[r,f]=(0,o.useState)(!1),[D,E]=(0,o.useState)(!0),[z,I]=(0,o.useState)(null),[R,k]=(0,o.useState)({role:"",organiser:"",startDate:null,endDate:null,description:"",hours:"0"}),[W,N]=(0,o.useState)(null),[$,L]=(0,o.useState)(null),[F,H]=(0,o.useState)(null);(0,o.useEffect)((()=>{_()}),[]);const _=async()=>{try{E(!0),I(null);const e=await M.yW.getUserExperience(Number(localStorage.getItem("user_id")));t(e)}catch(z){console.error("Failed to load experiences:",z),I(z instanceof Error?z.message:"Failed to load experiences")}finally{E(!1)}},P=()=>{f(!1),N(null),k({role:"",organiser:"",startDate:null,endDate:null,description:"",hours:"0"}),L(null),H(null)};return D?(0,j.jsx)(n.A,{maxWidth:"md",sx:{py:4,display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:(0,j.jsx)(a.A,{})}):(0,j.jsxs)(n.A,{maxWidth:"md",sx:{py:4},children:[(0,j.jsxs)(l.A,{sx:{mb:4,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,j.jsx)(i.A,{variant:"h4",component:"h1",children:"My Experience"}),(0,j.jsx)(s.A,{variant:"contained",startIcon:(0,j.jsx)(y,{}),onClick:()=>{N(null),f(!0)},children:"Add Experience"})]}),z&&(0,j.jsx)(c.A,{severity:"error",sx:{mb:2},children:z}),(0,j.jsx)(l.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:0===e.length?(0,j.jsx)(i.A,{variant:"body1",color:"text.secondary",align:"center",children:"No experiences yet. Add your first experience!"}):e.map((e=>{return(0,j.jsx)(d.A,{children:(0,j.jsxs)(p.A,{children:[(0,j.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,j.jsxs)(l.A,{children:[(0,j.jsx)(i.A,{variant:"h6",gutterBottom:!0,children:e.role}),(0,j.jsx)(i.A,{variant:"subtitle1",color:"text.secondary",gutterBottom:!0,children:e.organiser}),(0,j.jsxs)(i.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:[new Date(e.start_date).toLocaleDateString()," -",e.end_date?new Date(e.end_date).toLocaleDateString():"Present"]}),(0,j.jsxs)(i.A,{variant:"body2",color:"text.secondary",children:["Hours: ",e.hours]})]}),(0,j.jsxs)(l.A,{children:[(0,j.jsx)(u.A,{onClick:()=>(e=>{N(e),k({role:e.role,organiser:e.organiser,startDate:new Date(e.start_date),endDate:e.end_date?new Date(e.end_date):null,description:e.description,hours:e.hours}),H(e.participation_picture||null),f(!0)})(e),color:"primary",size:"small",sx:{mr:1},children:(0,j.jsx)(C.A,{})}),(0,j.jsx)(u.A,{onClick:()=>(async e=>{try{console.log("[Experience] Deleting experience:",e),await M.yW.deleteExperience(e),_()}catch(z){console.error("[Experience] Failed to delete experience:",z)}})(e.id),color:"error",size:"small",children:(0,j.jsx)(b,{})})]})]}),(0,j.jsx)(i.A,{variant:"body1",paragraph:!0,children:e.description}),e.participation_picture&&(0,j.jsx)(l.A,{component:"img",src:(t=e.participation_picture,t?t.startsWith("http")?t:`https://api.volunteernow.ro${t}`:""),alt:"Experience",sx:{width:"100%",maxHeight:200,objectFit:"cover",borderRadius:1,mt:2}})]})},e.id);var t}))}),(0,j.jsxs)(x.A,{open:r,onClose:P,maxWidth:"sm",fullWidth:!0,children:[(0,j.jsx)(h.A,{children:W?"Edit Experience":"Add New Experience"}),(0,j.jsx)(m.A,{children:(0,j.jsxs)(l.A,{sx:{mt:2},children:[(0,j.jsx)(A.A,{fullWidth:!0,label:"Organization",value:R.organiser,onChange:e=>k((t=>({...t,organiser:e.target.value}))),margin:"normal",required:!0}),(0,j.jsx)(A.A,{fullWidth:!0,label:"Role",value:R.role,onChange:e=>k((t=>({...t,role:e.target.value}))),margin:"normal",required:!0}),(0,j.jsxs)(l.A,{sx:{mt:2,mb:2},children:[(0,j.jsx)(S.l,{label:"Start Date",value:R.startDate,onChange:e=>k((t=>({...t,startDate:e}))),slotProps:{textField:{required:!0}}}),(0,j.jsx)(l.A,{sx:{display:"inline-block",ml:2},children:(0,j.jsx)(S.l,{label:"End Date",value:R.endDate,onChange:e=>k((t=>({...t,endDate:e})))})})]}),(0,j.jsx)(A.A,{fullWidth:!0,label:"Description",multiline:!0,rows:4,value:R.description,onChange:e=>k((t=>({...t,description:e.target.value}))),margin:"normal"}),(0,j.jsx)(A.A,{fullWidth:!0,label:"Hours",type:"number",value:R.hours,onChange:e=>k((t=>({...t,hours:e.target.value}))),margin:"normal",required:!0}),(0,j.jsxs)(l.A,{sx:{mt:2},children:[(0,j.jsx)("input",{accept:"image/*",style:{display:"none"},id:"experience-image-upload",type:"file",onChange:e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){L(r);const e=new FileReader;e.onloadend=()=>{H(e.result)},e.readAsDataURL(r)}}}),(0,j.jsx)("label",{htmlFor:"experience-image-upload",children:(0,j.jsxs)(v.A,{component:"span",sx:{width:"100%",height:200,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",border:"2px dashed",borderColor:"primary.main",backgroundColor:"background.paper",position:"relative",overflow:"hidden","&:hover":{backgroundColor:"action.hover"}},children:[F&&(0,j.jsx)(l.A,{component:"img",src:F,alt:"Experience preview",sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",opacity:.7}}),(0,j.jsxs)(l.A,{sx:{position:"relative",zIndex:1,display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:F?"rgba(255, 255, 255, 0.8)":"transparent",padding:2,borderRadius:1},children:[(0,j.jsx)(w,{sx:{fontSize:48,color:"primary.main",mb:1}}),(0,j.jsx)(i.A,{variant:"body1",color:"primary",children:F?"Change Image":"Upload Image"}),(0,j.jsx)(i.A,{variant:"caption",color:"text.secondary",sx:{mt:.5},children:"Recommended size: 800x600px"})]})]})})]})]})}),(0,j.jsxs)(g.A,{children:[(0,j.jsx)(s.A,{onClick:P,children:"Cancel"}),(0,j.jsx)(s.A,{onClick:async()=>{try{if(!R.role||!R.organiser||!R.startDate)return void console.error("[Experience] Validation failed: Required fields missing");if(!R.hours||parseInt(R.hours)<0)return void console.error("[Experience] Validation failed: Invalid hours value");if(!localStorage.getItem("token"))return void console.error("[Experience] User not logged in");let e;if(W){console.log("[Experience] Updating existing experience:",W.id);await M.yW.updateExperience(W.id,{role:R.role,organiser:R.organiser,description:R.description||"",startDate:R.startDate,endDate:R.endDate||void 0,hours:R.hours});e=W.id}else{console.log("[Experience] Creating new experience");e=(await M.yW.addExperience({role:R.role,organiser:R.organiser,description:R.description||"",startDate:R.startDate,endDate:R.endDate||void 0,hours:R.hours})).id}$&&(console.log("[Experience] Uploading experience picture"),await M.yW.updateExperiencePicture(e,$)),P(),_()}catch(z){console.error("[Experience] Failed to save experience:",z)}},variant:"contained",children:W?"Save Changes":"Add Experience"})]})]})]})}},6494:(e,t,r)=>{r.d(t,{A:()=>A});var o=r(8168),n=r(8587),a=r(5043),l=r(8387),i=r(8610),s=r(4535),c=r(8206),d=r(2532),p=r(2372);function u(e){return(0,p.Ay)("MuiCardContent",e)}(0,d.A)("MuiCardContent",["root"]);var x=r(579);const h=["className","component"],m=(0,s.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),A=a.forwardRef((function(e,t){const r=(0,c.b)({props:e,name:"MuiCardContent"}),{className:a,component:s="div"}=r,d=(0,n.A)(r,h),p=(0,o.A)({},r,{component:s}),A=(e=>{const{classes:t}=e;return(0,i.A)({root:["root"]},u,t)})(p);return(0,x.jsx)(m,(0,o.A)({as:s,className:(0,l.A)(A.root,a),ownerState:p,ref:t},d))}))},6600:(e,t,r)=>{r.d(t,{A:()=>A});var o=r(8168),n=r(8587),a=r(5043),l=r(8387),i=r(8610),s=r(5865),c=r(4535),d=r(8206),p=r(7034),u=r(2563),x=r(579);const h=["className","id"],m=(0,c.Ay)(s.A,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),A=a.forwardRef((function(e,t){const r=(0,d.b)({props:e,name:"MuiDialogTitle"}),{className:s,id:c}=r,A=(0,n.A)(r,h),v=r,g=(e=>{const{classes:t}=e;return(0,i.A)({root:["root"]},p.t,t)})(v),{titleId:f=c}=a.useContext(u.A);return(0,x.jsx)(m,(0,o.A)({component:"h2",className:(0,l.A)(g.root,s),ownerState:v,ref:t,variant:"h6",id:null!=c?c:f},A))}))}}]);
//# sourceMappingURL=324.6fafda6c.chunk.js.map